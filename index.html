<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Hangman</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

  <!-- Custom styles for this template -->
  <link href="./assets/style.css" rel="stylesheet">
</head>

<body>

  <div class="container">
    <main role="main">
      <div class="jumbotron">
        <h1 class="display-3">Hangman</h1>
        <div class="row">
          <div class="col">
            <canvas id="canvas" width="300" height="300">
              Sorry, your browser doesn't support the &lt;canvas&gt; element.
            </canvas>
          </div>
          <div class="col">
            <p class="lead" id="theWord"></p>
            <p><a onclick="startGame()" class="btn btn-lg btn-success" href="#" role="button">New Game</a></p>
          </div>
        </div>
      </div>
    </main>
  </div> <!-- /container -->

  <script>
    var mysteryWord = "initial";
    var knownWord = [];
    var tries = 6;
    var gameIsActive;
    var c = document.getElementById("canvas");
		var ctx = c.getContext("2d");

    // base
    ctx.moveTo(10,250);
    ctx.lineTo(100,250);
    ctx.stroke();
    // rope
    ctx.moveTo(100,10);
    ctx.lineTo(100,30);
    ctx.stroke();
    // pole
    ctx.moveTo(10,10);
    ctx.lineTo(10,250);
    ctx.stroke();
    // top
    ctx.moveTo(10,10);
    ctx.lineTo(150,10);
    ctx.stroke();
    // head
		ctx.beginPath();
		ctx.arc(100, 65, 35, 0, 2 * Math.PI);
		ctx.stroke();

    function startGame() {
      knownWord = [];
      mysteryWord = prompt("Enter the word you want people to guess");

      if(mysteryWord !== null || mysteryWord !== "") {
        gameIsActive = true;
        createEmptySpacesForKnownWord();
        updateLabel();
      }
    }

    function updateLabel() {
      document.getElementById("theWord").innerHTML = knownWord.join(' ');
    }

    document.onkeyup = function(event) {
      if(gameIsActive) {
        var letter = String.fromCharCode(event.keyCode).toLowerCase();
        addCharToKnownWordIfCorrect(letter);
        updateLabel();
      }
    }

    function knownWordHasBeenGuessed() {
      for (var i = 0; i < knownWord.length; i++) {
        // If we ever see a _, the user hasn't guessed all the letters
        if(knownWord[i] === '_') {
          return false;
        }
      }
      gameIsActive = false;
      return true;
    }

    function createEmptySpacesForKnownWord(word) {
      for (var i = 0; i < mysteryWord.length; i++) {
        knownWord.push('_');
      }
    }

    function addCharToKnownWordIfCorrect(char) {
      for (var i = 0; i < mysteryWord.length; i++) {
        // if submitted char is same as mysteryWord[i]
        if (char === mysteryWord.charAt(i)) {
          // fill knownWord slot with the char
          knownWord[i] = char;
        }
      }
    }
  </script>
</body>
</html>
